{
  "version": 3,
  "sources": [
    "../src/useCurveLine.tsx"
  ],
  "names": [
    "useState",
    "useEffect",
    "useMemo",
    "useMapContext",
    "requireScript",
    "useEnableProperties",
    "useProperties",
    "useVisiable",
    "useEventProperties",
    "useCurveLine",
    "props",
    "strokeColor",
    "strokeWeight",
    "strokeOpacity",
    "strokeStyle",
    "enableMassClear",
    "enableEditing",
    "enableClicking",
    "icons",
    "map",
    "curveLine",
    "setCurveLine",
    "libSDK",
    "window",
    "BMapLib",
    "bMapLib",
    "setBMapLib",
    "loadMapLib",
    "setLoadBMapLib",
    "opts",
    "CurveLine",
    "points",
    "path",
    "item",
    "BMap",
    "Point",
    "lng",
    "lat",
    "instance",
    "addOverlay",
    "then",
    "newMapLib",
    "Object",
    "assign",
    "catch",
    "setPath",
    "JSON",
    "stringify"
  ],
  "mappings": "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",
  "sourcesContent": [
    "import { useState, useEffect, useMemo } from 'react';\nimport { useMapContext } from '@uiw/react-baidu-map-map';\nimport { requireScript } from '@uiw/react-baidu-map-utils';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '@uiw/react-baidu-map-utils';\nimport { CurveLineProps } from '.';\n\nexport interface UseCurveLine extends CurveLineProps {}\n\nexport function useCurveLine(props = {} as UseCurveLine) {\n  const {\n    strokeColor,\n    strokeWeight,\n    strokeOpacity,\n    strokeStyle,\n    enableMassClear,\n    enableEditing = false,\n    enableClicking,\n    icons,\n  } = props;\n  const { map } = useMapContext();\n  const [curveLine, setCurveLine] = useState<BMapLib.CurveLine>();\n  const libSDK = window.BMapLib;\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK);\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const opts = {\n    strokeColor,\n    strokeWeight,\n    strokeOpacity,\n    strokeStyle,\n    enableMassClear,\n    enableEditing,\n    enableClicking,\n    icons,\n  };\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !curveLine) {\n      if (bMapLib.CurveLine) {\n        const points = (props.path || []).map((item) => new BMap.Point(item.lng, item.lat));\n        const instance = new BMapLib.CurveLine(points, opts);\n        map.addOverlay(instance);\n        setCurveLine(instance);\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if (map && bMapLib && !bMapLib.CurveLine) {\n      requireScript('//api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            const newMapLib = Object.assign(window.BMapLib, bMapLib);\n            setBMapLib(newMapLib);\n\n            const points = (props.path || []).map((item) => new BMap.Point(item.lng, item.lat));\n            const instance = new BMapLib.CurveLine(points, opts);\n            map.addOverlay(instance);\n            setCurveLine(instance);\n          }\n        })\n        .catch(() => {});\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true);\n      requireScript('//api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            setBMapLib(window.BMapLib);\n          }\n        })\n        .catch(() => {});\n    }\n  }, [map, bMapLib, curveLine, loadMapLib, props.path, opts]);\n\n  const [path, setPath] = useState(props.path || []);\n  useEffect(() => {\n    if (curveLine && props.path && path && JSON.stringify(path) !== JSON.stringify(props.path)) {\n      const points = path.map((item) => new BMap.Point(item.lng, item.lat));\n      curveLine.setPath(points);\n    }\n  }, [curveLine, path, props.path]);\n\n  useVisiable(curveLine!, props);\n  useEventProperties<BMap.Polyline, UseCurveLine>(curveLine!, props, [\n    'Click',\n    'DblClick',\n    'MouseDown',\n    'MouseUp',\n    'MouseOut',\n    'MouseOver',\n    'Remove',\n    'LineUpdate',\n  ]);\n  useEnableProperties<BMapLib.CurveLine, UseCurveLine>(curveLine!, props, ['Editing', 'MassClear']);\n  // PositionAt\n  useProperties<BMapLib.CurveLine, UseCurveLine>(curveLine!, props, [\n    'StrokeColor',\n    'StrokeOpacity',\n    'StrokeWeight',\n    'StrokeStyle',\n  ]);\n\n  return {\n    curveLine,\n    setCurveLine,\n    BMapLib: bMapLib,\n    path,\n    setPath,\n  };\n}\n"
  ]
}