{
  "version": 3,
  "sources": [
    "../src/useDrawingManager.tsx"
  ],
  "names": [
    "useState",
    "useMemo",
    "useMapContext",
    "requireScript",
    "requireCss",
    "useDrawingManager",
    "props",
    "isOpen",
    "drawingMode",
    "enableDrawingTool",
    "enableCalculate",
    "drawingToolOptions",
    "markerOptions",
    "circleOptions",
    "polylineOptions",
    "polygonOptions",
    "rectangleOptions",
    "map",
    "drawingManager",
    "setDrawingManager",
    "libSDK",
    "window",
    "BMapLib",
    "bMapLib",
    "setBMapLib",
    "loadMapLib",
    "setLoadBMapLib",
    "opts",
    "DrawingManager",
    "instance",
    "then",
    "newMapLib",
    "Object",
    "assign",
    "catch"
  ],
  "mappings": "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",
  "sourcesContent": [
    "import { useState, useMemo } from 'react';\nimport { useMapContext } from '@uiw/react-baidu-map-map';\nimport { requireScript, requireCss } from '@uiw/react-baidu-map-utils';\nimport { DrawingManagerProps } from '.';\n\nexport interface UseDrawingManager extends DrawingManagerProps {}\n\nexport function useDrawingManager(props = {} as UseDrawingManager) {\n  const {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } = props;\n  const { map } = useMapContext();\n\n  const [drawingManager, setDrawingManager] = useState<BMapLib.DrawingManager>();\n  const libSDK = window.BMapLib;\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK);\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK);\n  const opts = {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } as BMap.DrawingManagerOptions;\n\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !drawingManager) {\n      if (bMapLib.DrawingManager) {\n        const instance = new BMapLib.DrawingManager(map, opts);\n        setDrawingManager(instance);\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if (map && bMapLib && !bMapLib.DrawingManager) {\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            const newMapLib = Object.assign(window.BMapLib, bMapLib);\n            setBMapLib(newMapLib);\n\n            const instance = new BMapLib.DrawingManager(map, opts);\n            setDrawingManager(instance);\n          }\n        })\n        .catch(() => {});\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true);\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            setBMapLib(window.BMapLib);\n          }\n        })\n        .catch(() => {});\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, loadMapLib, bMapLib, drawingManager]);\n\n  return {\n    drawingManager,\n    setDrawingManager,\n    BMapLib: bMapLib,\n  };\n}\n"
  ]
}