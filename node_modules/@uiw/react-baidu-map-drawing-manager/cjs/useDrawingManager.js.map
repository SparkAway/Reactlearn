{
  "version": 3,
  "sources": [
    "../src/useDrawingManager.tsx"
  ],
  "names": [
    "useDrawingManager",
    "props",
    "isOpen",
    "drawingMode",
    "enableDrawingTool",
    "enableCalculate",
    "drawingToolOptions",
    "markerOptions",
    "circleOptions",
    "polylineOptions",
    "polygonOptions",
    "rectangleOptions",
    "map",
    "drawingManager",
    "setDrawingManager",
    "libSDK",
    "window",
    "BMapLib",
    "bMapLib",
    "setBMapLib",
    "loadMapLib",
    "setLoadBMapLib",
    "opts",
    "DrawingManager",
    "instance",
    "then",
    "newMapLib",
    "Object",
    "assign",
    "catch"
  ],
  "mappings": "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",
  "sourcesContent": [
    "import { useState, useMemo } from 'react';\nimport { useMapContext } from '@uiw/react-baidu-map-map';\nimport { requireScript, requireCss } from '@uiw/react-baidu-map-utils';\nimport { DrawingManagerProps } from '.';\n\nexport interface UseDrawingManager extends DrawingManagerProps {}\n\nexport function useDrawingManager(props = {} as UseDrawingManager) {\n  const {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } = props;\n  const { map } = useMapContext();\n\n  const [drawingManager, setDrawingManager] = useState<BMapLib.DrawingManager>();\n  const libSDK = window.BMapLib;\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK);\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK);\n  const opts = {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } as BMap.DrawingManagerOptions;\n\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !drawingManager) {\n      if (bMapLib.DrawingManager) {\n        const instance = new BMapLib.DrawingManager(map, opts);\n        setDrawingManager(instance);\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if (map && bMapLib && !bMapLib.DrawingManager) {\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            const newMapLib = Object.assign(window.BMapLib, bMapLib);\n            setBMapLib(newMapLib);\n\n            const instance = new BMapLib.DrawingManager(map, opts);\n            setDrawingManager(instance);\n          }\n        })\n        .catch(() => {});\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true);\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            setBMapLib(window.BMapLib);\n          }\n        })\n        .catch(() => {});\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, loadMapLib, bMapLib, drawingManager]);\n\n  return {\n    drawingManager,\n    setDrawingManager,\n    BMapLib: bMapLib,\n  };\n}\n"
  ]
}