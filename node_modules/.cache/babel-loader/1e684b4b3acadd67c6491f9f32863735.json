{"ast":null,"code":"/// <reference types=\"@uiw/react-baidu-map-types\" />\nimport { render } from 'react-dom';\nimport React, { Fragment, useEffect, useState, useRef, useLayoutEffect } from 'react';\n/**\n * 批量创建多个如下 State，监听并设置值，\n * 组件属性更改 <Componet enableDragging={true} >\n * 根据 enableDragging 的 Boolean 值，执行 `enable` 和 `disable` 开头的函数。\n * @example\n * ```js\n * const [enableDragging, setEnableDragging] = useState(props.enableDragging);\n * useEffect(() => {\n *   console.log('~~:enableDragging', enableDragging, props.enableDragging, polyline);\n *   setEnableDragging(props.enableDragging)\n * }, [polyline, enableDragging, props.enableDragging]);\n * ```\n * @param instance\n * @param props\n * @param propsName\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function useEnableProperties(instance, props, propsName) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  if (propsName === void 0) {\n    propsName = [];\n  }\n\n  propsName.forEach(name => {\n    var eName = \"enable\" + name;\n    var funName = props[eName] ? \"enable\" + name : \"disable\" + name;\n\n    if (instance && props[eName] !== undefined) {\n      instance[funName] && instance[funName]();\n    }\n  });\n}\n/**\n * 针对 Overlay 类型的组件，有公共的是否显示 对象处理\n * 通过参数 `visiable` 来控制执行 `show()` or `hide()`\n */\n\nexport function useVisiable(instance, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var visiable = props.visiable;\n  var [state, setState] = useState(visiable);\n  useEffect(() => {\n    if (instance && visiable !== undefined) {\n      if (visiable) {\n        instance.show && instance.show();\n      } else {\n        instance.hide && instance.hide();\n      }\n\n      if (visiable !== state) {\n        setState(visiable);\n      }\n    }\n  }, [instance, state, visiable]);\n}\n/**\n * 批量创建多个如下 State，监听并设置值，\n * 执行 `set` 开头的函数。\n * @param instance\n * @param props\n * @param propsName\n */\n\nexport function useProperties(instance, props, propsName) {\n  if (propsName === void 0) {\n    propsName = [];\n  }\n\n  propsName.forEach(name => {\n    var eName = \"\" + name.charAt(0).toLowerCase() + name.slice(1); // eslint-disable-next-line react-hooks/rules-of-hooks\n\n    var [state, setState] = useState(props[eName]); // eslint-disable-next-line react-hooks/rules-of-hooks\n\n    useEffect(() => {\n      if (instance && instance[\"set\" + name] && props[eName] !== undefined) {\n        /**\n         * 坐标点的参数设置，比对, 坐标点的参数设置\n         */\n        var data = props[eName];\n\n        if (data && data.lng && data.lat) {\n          data = new BMap.Point(data.lng, data.lat);\n          var preData = state;\n\n          if (preData && preData.lng && preData.lat) {\n            preData = new BMap.Point(preData.lng, preData.lat);\n\n            if (data.equals(preData)) {\n              return;\n            }\n          }\n        }\n\n        instance[\"set\" + name](data); // 属性发生变化缓存\n\n        if (state !== props[eName]) {\n          if (eName === 'bounds') {\n            if (state && props[eName] && !state.equals(props[eName])) {\n              setState(props[eName]);\n            }\n          } else {\n            setState(props[eName]);\n          }\n        }\n      } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    }, [instance, props[eName]]);\n  });\n}\n/**\n * 绑定事件\n * @param instance 实例对象\n * @param props 传递进来的 props\n * @param eventName 事件的名字，如，我们使用 `onClick` 事件，最终被转换成，`click` 绑定到实例中，`onDblClick` => `dblclick`\n *\n * @example\n * ```js\n * useEventProperties<BMap.Marker, UseMarker>(marker!, props, [\n *   'Click', 'DblClick', 'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver'\n * ]);\n * ```\n */\n\nexport function useEventProperties(instance, props, eventName, type) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  if (eventName === void 0) {\n    eventName = [];\n  }\n\n  eventName.forEach(name => {\n    var eventName = \"on\" + name;\n    var eventHandle = props[eventName]; // eslint-disable-next-line react-hooks/rules-of-hooks\n\n    useEffect(() => {\n      if (!instance) return;\n\n      if (eventHandle && name) {\n        var eName = name;\n\n        if (type === 'CamelCase') {\n          eName = name.replace(name[0], name[0].toLowerCase());\n        } else {\n          eName = name.toLowerCase();\n        }\n\n        instance.addEventListener(eName, eventHandle);\n        return () => {\n          instance.removeEventListener(eName, eventHandle);\n        };\n      } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    }, [instance, props[eventName]]);\n  });\n}\n/**\n * 获取上一轮的 props 或 state\n * How to get the previous props or state?\n * https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n * @example\n * ```js\n * function Counter() {\n *   const [count, setCount] = useState(0);\n *   const prevCount = usePrevious(count);\n *   return <h1>Now: {count}, before: {prevCount}</h1>;\n * }\n * ```\n */\n\nexport function usePrevious(value) {\n  var ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\nexport function useRenderDom(props) {\n  var container = useRef(document.createElement('div'));\n  useLayoutEffect(() => {\n    render( /*#__PURE__*/_jsx(Fragment, {\n      children: props.children\n    }), container.current);\n  }, [props.children]);\n  return {\n    container: container.current\n  };\n}","map":{"version":3,"mappings":"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","names":["render","React","Fragment","useEffect","useState","useRef","useLayoutEffect","useEnableProperties","instance","props","propsName","forEach","name","eName","funName","undefined","useVisiable","visiable","state","setState","show","hide","useProperties","charAt","toLowerCase","slice","data","lng","lat","BMap","Point","preData","equals","useEventProperties","eventName","type","eventHandle","replace","addEventListener","removeEventListener","usePrevious","value","ref","current","useRenderDom","container","document","createElement","_jsx","children"],"sources":["D:\\HB\\ReactProject\\22_3_8\\backboot\\node_modules\\@uiw\\react-baidu-map-utils\\src\\hooks.tsx"],"sourcesContent":["/// <reference types=\"@uiw/react-baidu-map-types\" />\nimport { render } from 'react-dom';\nimport React, { Fragment, useEffect, useState, useRef, useLayoutEffect } from 'react';\n\n/**\n * 批量创建多个如下 State，监听并设置值，\n * 组件属性更改 <Componet enableDragging={true} >\n * 根据 enableDragging 的 Boolean 值，执行 `enable` 和 `disable` 开头的函数。\n * @example\n * ```js\n * const [enableDragging, setEnableDragging] = useState(props.enableDragging);\n * useEffect(() => {\n *   console.log('~~:enableDragging', enableDragging, props.enableDragging, polyline);\n *   setEnableDragging(props.enableDragging)\n * }, [polyline, enableDragging, props.enableDragging]);\n * ```\n * @param instance\n * @param props\n * @param propsName\n */\nexport function useEnableProperties<T = {}, F = {}>(instance: T, props = {} as F, propsName: string[] = []) {\n  propsName.forEach((name) => {\n    const eName = `enable${name}` as keyof F;\n    const funName = (props[eName] ? `enable${name}` : `disable${name}`) as keyof T;\n    if (instance && props[eName] !== undefined) {\n      instance[funName] && (instance[funName] as any)();\n    }\n  });\n}\n\n/**\n * 针对 Overlay 类型的组件，有公共的是否显示 对象处理\n * 通过参数 `visiable` 来控制执行 `show()` or `hide()`\n */\nexport function useVisiable<T extends BMap.Overlay, F extends { visiable?: boolean }>(instance: T, props = {} as F) {\n  const visiable = (props as any).visiable;\n  const [state, setState] = useState(visiable);\n  useEffect(() => {\n    if (instance && visiable !== undefined) {\n      if (visiable) {\n        instance.show && instance.show();\n      } else {\n        instance.hide && instance.hide();\n      }\n      if (visiable !== state) {\n        setState(visiable);\n      }\n    }\n  }, [instance, state, visiable]);\n}\n\n/**\n * 批量创建多个如下 State，监听并设置值，\n * 执行 `set` 开头的函数。\n * @param instance\n * @param props\n * @param propsName\n */\nexport function useProperties<T, F>(instance: T, props: F, propsName: string[] = []) {\n  propsName.forEach((name) => {\n    const eName = `${name.charAt(0).toLowerCase()}${name.slice(1)}` as keyof F;\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const [state, setState] = useState(props[eName]);\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      if (instance && instance[`set${name}` as keyof T] && props[eName] !== undefined) {\n        /**\n         * 坐标点的参数设置，比对, 坐标点的参数设置\n         */\n        let data: any = props[eName];\n        if (data && data.lng && data.lat) {\n          data = new BMap.Point(data.lng, data.lat);\n          let preData: any = state;\n          if (preData && preData.lng && preData.lat) {\n            preData = new BMap.Point(preData.lng, preData.lat);\n            if (data.equals(preData)) {\n              return;\n            }\n          }\n        }\n\n        (instance[`set${name}` as keyof T] as any)(data);\n        // 属性发生变化缓存\n        if (state !== props[eName]) {\n          if (eName === 'bounds') {\n            if (state && props[eName] && !(state as any).equals(props[eName])) {\n              setState(props[eName]);\n            }\n          } else {\n            setState(props[eName]);\n          }\n        }\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [instance, props[eName]]);\n  });\n}\n\nexport interface EventListener {\n  /**\n   * 添加事件监听函数\n   * @param event\n   * @param handler\n   */\n  addEventListener(event: string, handler: any): void;\n  /**\n   * 移除事件监听函数\n   * @param event\n   * @param handler\n   */\n  removeEventListener(event: string, handler: any): void;\n}\n\nexport type EventNameType = 'CamelCase' | 'PascalCase' | 'LowerCase';\n\n/**\n * 绑定事件\n * @param instance 实例对象\n * @param props 传递进来的 props\n * @param eventName 事件的名字，如，我们使用 `onClick` 事件，最终被转换成，`click` 绑定到实例中，`onDblClick` => `dblclick`\n *\n * @example\n * ```js\n * useEventProperties<BMap.Marker, UseMarker>(marker!, props, [\n *   'Click', 'DblClick', 'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver'\n * ]);\n * ```\n */\nexport function useEventProperties<T extends EventListener, F>(\n  instance: T,\n  props = {} as F,\n  eventName: string[] = [],\n  type?: EventNameType,\n) {\n  eventName.forEach((name) => {\n    const eventName = `on${name}` as keyof F;\n    const eventHandle = props[eventName];\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      if (!instance) return;\n      if (eventHandle && name) {\n        let eName = name;\n        if (type === 'CamelCase') {\n          eName = name.replace(name[0], name[0].toLowerCase());\n        } else {\n          eName = name.toLowerCase();\n        }\n        instance.addEventListener(eName, eventHandle);\n        return () => {\n          instance.removeEventListener(eName, eventHandle);\n        };\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [instance, props[eventName]]);\n  });\n}\n\n/**\n * 获取上一轮的 props 或 state\n * How to get the previous props or state?\n * https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n * @example\n * ```js\n * function Counter() {\n *   const [count, setCount] = useState(0);\n *   const prevCount = usePrevious(count);\n *   return <h1>Now: {count}, before: {prevCount}</h1>;\n * }\n * ```\n */\nexport function usePrevious<T>(value: T) {\n  const ref = useRef<T>();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function useRenderDom(props: { children: React.ReactNode }) {\n  const container = useRef(document.createElement('div'));\n\n  useLayoutEffect(() => {\n    render(<Fragment>{props.children}</Fragment>, container.current);\n  }, [props.children]);\n\n  return { container: container.current };\n}\n"]},"metadata":{},"sourceType":"module"}