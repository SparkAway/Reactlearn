{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"style\", \"children\"]; /// <reference types=\"@uiw/react-baidu-map-types\" />\n\nimport React, { useRef, useEffect, useImperativeHandle, useReducer, useMemo } from 'react';\nimport { useMap } from './useMap';\nimport { Context, reducer, initialState } from './context';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport * from './useMap';\nexport * from './context';\nexport function Provider(props) {\n  var [state, dispatch] = useReducer(reducer, initialState);\n  return /*#__PURE__*/_jsx(Context.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: props.children\n  });\n}\nexport default /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  var {\n    className,\n    style,\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var [state, dispatch] = useReducer(reducer, initialState);\n  window.BMap = window.BMap || window.BMapGL;\n  var elmRef = useRef(null);\n  var {\n    setContainer,\n    container,\n    setCenter,\n    setAutoLocalCity,\n    map\n  } = useMap(_extends({\n    container: elmRef.current\n  }, props)); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useEffect(() => setContainer(elmRef.current), [elmRef.current]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useMemo(() => props.center && setCenter(props.center), [props.center]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useEffect(() => setAutoLocalCity(props.autoLocalCity), [props.autoLocalCity]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useImperativeHandle(ref, () => _extends({}, props, {\n    map,\n    BMap,\n    container: elmRef.current\n  }), [map]);\n  var childs = React.Children.toArray(children);\n  useEffect(() => {\n    if (map) {\n      dispatch({\n        map,\n        container: elmRef.current,\n        BMap\n      });\n    }\n  }, [map]);\n  return /*#__PURE__*/_jsxs(Context.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      ref: elmRef,\n      className: className,\n      style: _extends({\n        fontSize: 1,\n        height: '100%'\n      }, style)\n    }), BMap && map && typeof children === 'function' && children({\n      BMap,\n      map,\n      container\n    }), BMap && map && childs.map((child, key) => {\n      if (! /*#__PURE__*/React.isValidElement(child)) return null;\n\n      if (child.type && typeof child.type === 'string') {\n        return /*#__PURE__*/React.cloneElement(child, {\n          key\n        });\n      }\n\n      return /*#__PURE__*/React.cloneElement(child, _extends({}, child.props, {\n        BMap,\n        map,\n        container,\n        key\n      }));\n    })]\n  });\n});","map":{"version":3,"mappings":"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","names":["React","useRef","useEffect","useImperativeHandle","useReducer","useMemo","useMap","Context","reducer","initialState","Provider","props","state","dispatch","_jsx","value","children","forwardRef","ref","className","style","_ref","window","BMap","BMapGL","elmRef","setContainer","container","setCenter","setAutoLocalCity","map","current","center","autoLocalCity","childs","Children","toArray","_jsxs","fontSize","height","child","key","isValidElement","type","cloneElement"],"sources":["D:\\HB\\ReactProject\\22_3_8\\backboot\\node_modules\\@uiw\\react-baidu-map-map\\src\\index.tsx"],"sourcesContent":["/// <reference types=\"@uiw/react-baidu-map-types\" />\nimport React, { useRef, useEffect, useImperativeHandle, useReducer, useMemo, CSSProperties } from 'react';\nimport { useMap } from './useMap';\nimport { Context, reducer, initialState } from './context';\n\nexport * from './useMap';\nexport * from './context';\n\nexport interface Control {\n  Control: BMap.Control;\n  NavigationControl: BMap.NavigationControlOptions;\n  OverviewMapControl: BMap.OverviewMapControlOptions;\n  ScaleControl: BMap.ScaleControlOptions;\n  MapTypeControl: BMap.MapTypeControlOptions;\n  CopyrightControl: BMap.CopyrightControlOptions;\n  GeolocationControl: BMap.GeolocationControlOptions;\n}\n\nexport type ControlOptions =\n  | {\n      name: keyof Control;\n      options?: (bmap: typeof BMap, map: BMap.Map) => void;\n      control?(bmap: typeof BMap, map: BMap.Map): BMap.Control;\n    }\n  | {\n      name: keyof Control;\n      options?: Control[keyof Control];\n      control?(bmap: typeof BMap, map: BMap.Map): BMap.Control;\n    };\n\nexport type ControlOptionsAll = keyof Control | ControlOptions;\n\nexport interface MapProps extends BMap.MapOptions, BMap.MapEvents {\n  className?: React.HTMLAttributes<HTMLDivElement>['className'];\n  style?: React.HTMLAttributes<HTMLDivElement>['style'];\n  /**\n   * 指定的容器\n   */\n  container?: HTMLDivElement | null | undefined;\n  /**\n   * 百度地图上负责与地图交互的UI元素称为控件。\n   */\n  widget?: (ControlOptionsAll | ControlOptions)[];\n  /**\n   * 缩放等级\n   */\n  zoom?: number;\n  /**\n   * 定位, 可使用如 `上海市` 的地区字符串，\n   * 也可以使用对象如 `{lng: 121.424333, lat: 31.228604}` 表示经纬度\n   */\n  center?: string | BMap.Point;\n  /**\n   * IP定位获取当前城市，进行自动定位\n   */\n  autoLocalCity?: boolean;\n  children?: React.ReactNode;\n  /** 设置地图默认的鼠标指针样式。参数cursor应符合CSS的cursor属性规范 */\n  defaultCursor?: CSSProperties['cursor'];\n  /**\n   * 启用地图拖拽，默认启用\n   */\n  enableDragging?: boolean;\n  /**\n   * 启用滚轮放大缩小，默认禁用\n   */\n  enableScrollWheelZoom?: boolean;\n  /**\n   * 启用双击放大，默认启用\n   */\n  enableDoubleClickZoom?: boolean;\n  /**\n   * 启用地图惯性拖拽，默认禁用\n   */\n  enableInertialDragging?: boolean;\n  /**\n   * 启用连续缩放效果，默认禁用\n   */\n  enableContinuousZoom?: boolean;\n  /**\n   * 启用双指操作缩放，默认启用\n   */\n  enablePinchToZoom?: boolean;\n  /**\n   * 启用键盘操作，默认禁用。键盘的上、下、左、右键可连续移动地图。同时按下其中两个键可使地图进行对角移动。\n   * PgUp、PgDn、Home和End键会使地图平移其1/2的大小。+、-键会使地图放大或缩小一级\n   */\n  enableKeyboard?: boolean;\n  /**\n   * 设置地图个性化样式V2版本，仅支持现代浏览器（支持Canvas）\n   */\n  mapStyleV2?: BMap.MapStyleV2;\n  /**\n   * 设置地图城市，注意当地图初始化时的类型设置为 `BMAP_NORMAL_MAP` 时，\n   * 需要在调用 `centerAndZoom` 之前调用此方法设置地图所在城市。\n   * 例如：\n   * @example\n   *\n   * ```js\n   * var map = new BMap.Map(“container”, { mapType: BMAP_NORMAL_MAP });\n   * map.setCurrentCity(“北京市”);\n   * map.centerAndZoom(new BMap.Point(116.404, 39.915), 18);\n   * ```\n   *\n   * 注意：初始化的坐标应与您设置的城市对应，否则地图将无法正常显示。\n   */\n  currentCity?: string;\n  /**\n   * 将全景实例与Map类进行绑定\n   */\n  panorama?: BMap.Panorama;\n\n  viewport?: (view: Array<BMap.Point> | BMap.Viewport, viewportOptions: BMap.ViewportOptions) => void;\n}\n\nexport type MapChildRenderProps =\n  | {\n      children?: (data: { BMap: typeof BMap; map: BMap.Map; container?: string | HTMLDivElement | null }) => void;\n    }\n  | { children?: React.ReactNode };\n\nexport function Provider(props: MapChildRenderProps) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return <Context.Provider value={{ state, dispatch }}>{props.children}</Context.Provider>;\n}\n\nexport default React.forwardRef<MapProps & { map?: BMap.Map }, MapProps & MapChildRenderProps>(\n  ({ className, style, children, ...props }, ref) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    window.BMap = window.BMap || window.BMapGL;\n    const elmRef = useRef<HTMLDivElement>(null);\n    const { setContainer, container, setCenter, setAutoLocalCity, map } = useMap({\n      container: elmRef.current,\n      ...props,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => setContainer(elmRef.current), [elmRef.current]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useMemo(() => props.center && setCenter(props.center!), [props.center]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => setAutoLocalCity(props.autoLocalCity!), [props.autoLocalCity]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useImperativeHandle(ref, () => ({ ...props, map, BMap, container: elmRef.current }), [map]);\n    const childs = React.Children.toArray(children);\n    useEffect(() => {\n      if (map) {\n        dispatch({ map, container: elmRef.current, BMap });\n      }\n    }, [map]);\n    return (\n      <Context.Provider value={{ state, dispatch }}>\n        <div ref={elmRef} className={className} style={{ fontSize: 1, height: '100%', ...style }} />\n        {BMap && map && typeof children === 'function' && children({ BMap, map, container })}\n        {BMap &&\n          map &&\n          childs.map((child, key) => {\n            if (!React.isValidElement(child)) return null;\n            if (child.type && typeof child.type === 'string') {\n              return React.cloneElement(child, { key });\n            }\n            return React.cloneElement(child, {\n              ...child.props,\n              BMap,\n              map,\n              container,\n              key,\n            });\n          })}\n      </Context.Provider>\n    );\n  },\n);\n"]},"metadata":{},"sourceType":"module"}