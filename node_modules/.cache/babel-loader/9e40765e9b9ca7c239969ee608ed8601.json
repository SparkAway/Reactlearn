{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { requireScript } from '@uiw/react-baidu-map-utils';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default /*#__PURE__*/React.forwardRef((props, ref) => {\n  var {\n    children,\n    map,\n    container\n  } = props || {};\n  var [completed, setCompleted] = useState(false);\n  useEffect(() => {\n    if (props.src) {\n      requireScript(props.src).then(() => {\n        setCompleted(true);\n        props.onCompleted && props.onCompleted();\n      }).catch(err => {\n        props.onFailed && props.onFailed(err);\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  var childs = React.Children.toArray(children);\n\n  if (completed) {\n    return /*#__PURE__*/_jsxs(Fragment, {\n      children: [typeof children === 'function' && children({\n        BMap,\n        map,\n        container\n      }), childs.map(child => {\n        if (! /*#__PURE__*/React.isValidElement(child)) return null;\n        return /*#__PURE__*/React.cloneElement(child, _extends({}, child.props, {\n          BMap,\n          map,\n          container\n        }));\n      })]\n    });\n  }\n\n  return null;\n});","map":{"version":3,"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAqD,OAArD;AACA,SAASC,aAAT,QAA8B,4BAA9B;;AAWA,4BAAeJ,KAAK,CAACK,UAANL,CAMb,CAACM,KAAD,EAAQC,GAAR,KAAgB;AAChB,MAAM;AAAEC,YAAF;AAAYC,OAAZ;AAAiBC;AAAjB,MAA+BJ,KAAK,IAAI,EAA9C;AACA,MAAM,CAACK,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,KAAD,CAA1C;AACAD,WAAS,CAAC,MAAM;AACd,QAAII,KAAK,CAACO,GAAV,EAAe;AACbT,mBAAa,CAACE,KAAK,CAACO,GAAP,CAAbT,CACGU,IADHV,CACQ,MAAM;AACVQ,oBAAY,CAAC,IAAD,CAAZA;AACAN,aAAK,CAACS,WAANT,IAAqBA,KAAK,CAACS,WAANT,EAArBA;AAHJ,SAKGU,KALHZ,CAKUa,GAAD,IAAS;AACdX,aAAK,CAACY,QAANZ,IAAkBA,KAAK,CAACY,QAANZ,CAAeW,GAAfX,CAAlBA;AANJ;AAFY,MAWd;;AAXO,KAYN,EAZM,CAATJ;AAaA,MAAMiB,MAAM,GAAGnB,KAAK,CAACoB,QAANpB,CAAeqB,OAAfrB,CAAuBQ,QAAvBR,CAAf;;AACA,MAAIW,SAAJ,EAAe;AACb,wBACEW,MAACrB,QAAD;AAAAO,iBACG,OAAOA,QAAP,KAAoB,UAApB,IAAkCA,QAAQ,CAAC;AAAEe,YAAF;AAAQd,WAAR;AAAaC;AAAb,OAAD,CAD7C,EAEGS,MAAM,CAACV,GAAPU,CAAYK,KAAD,IAAW;AACrB,YAAI,eAACxB,KAAK,CAACyB,cAANzB,CAAqBwB,KAArBxB,CAAL,EAAkC,OAAO,IAAP;AAClC,4BAAOA,KAAK,CAAC0B,YAAN1B,CAAmBwB,KAAnBxB,eACFwB,KAAK,CAAClB,KADJ;AAELiB,cAFK;AAGLd,aAHK;AAILC;AAJK,WAAP;AAFD,QAFH;AAAA,MADF;AAcD;;AAED,SAAO,IAAP;AAxCa,EAAf","names":["React","Fragment","useEffect","useState","requireScript","forwardRef","props","ref","children","map","container","completed","setCompleted","src","then","onCompleted","catch","err","onFailed","childs","Children","toArray","_jsxs","BMap","child","isValidElement","cloneElement"],"sources":["D:\\HB\\ReactProject\\22_3_8\\backboot\\node_modules\\@uiw\\react-baidu-map-require-script\\src\\index.tsx"],"sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\nimport { requireScript } from '@uiw/react-baidu-map-utils';\nimport { MapChildRenderProps } from '@uiw/react-baidu-map-map';\n\nexport type RequireScriptProps = {\n  src?: string;\n  /** ✅ 加载完成 */\n  onCompleted?: () => void;\n  /** ❌ 加载失败 */\n  onFailed?: (error: any) => void;\n} & MapChildRenderProps;\n\nexport default React.forwardRef<\n  RequireScriptProps,\n  RequireScriptProps & {\n    map: BMap.Map;\n    container?: string | HTMLDivElement | null;\n  }\n>((props, ref) => {\n  const { children, map, container } = props || {};\n  const [completed, setCompleted] = useState(false);\n  useEffect(() => {\n    if (props.src) {\n      requireScript(props.src)\n        .then(() => {\n          setCompleted(true);\n          props.onCompleted && props.onCompleted();\n        })\n        .catch((err) => {\n          props.onFailed && props.onFailed(err);\n        });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const childs = React.Children.toArray(children);\n  if (completed) {\n    return (\n      <Fragment>\n        {typeof children === 'function' && children({ BMap, map, container })}\n        {childs.map((child) => {\n          if (!React.isValidElement(child)) return null;\n          return React.cloneElement(child, {\n            ...child.props,\n            BMap,\n            map,\n            container,\n          });\n        })}\n      </Fragment>\n    );\n  }\n\n  return null;\n});\n"]},"metadata":{},"sourceType":"module"}